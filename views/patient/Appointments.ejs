<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>Patient page</title>
  <!-- Home page icon -->
  <!-- css -->
  <!-- <link rel="stylesheet" href="/Style/nurseIndex.css"> -->
  <!-- bootstrap -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <!-- favicon icon -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Home</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  <!-- JavaScript Bundle with Popper -->
  <link rel="stylesheet" href="/Style/register.css">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
    crossorigin="anonymous"></script>
</head>

<body>
  <header>
    <script src="https://code.jquery.com/jquery-1.12.4.js" type="text/javascript"></script>
    <script src="https://www.negishim.com/accessibility/accessibility_pro.js" type="text/javascript"></script>
    <script type="text/javascript">
      accessibility_rtl = true;
      pixel_from_side = 20;
      pixel_from_start = 20;
    </script>

  </header>
  <nav class="navbar navbar-dark bg-white fixed-top">
    <div class="container-fluid">
      <ul class="nav " style="color: white;">
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" style="font-size: 24px; color: #0298EC;"
            href="/patient/Index/<%= result.id %> ">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/patient/Appointments/<%= result.id %> "
            style="font-size: 18px; margin-top:6px; color: #0298EC;">Appointments</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/patient/Doctors/<%= result.id %>"
            style="font-size: 18px; margin-top:6px; color: #0298EC;">Doctors/Nurses</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/patient/Medicine/<%= result.id %>"
            style="font-size: 18px; margin-top:6px; color: #0298EC;">Medicine</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/patient/Profile/<%= result.id %>"
            style="font-size: 18px; margin-top:6px; color: #0298EC;">Profile</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/patient/Guide/<%= result.id %> "
            style="font-size: 18px; margin-top:6px; color: #0298EC;">Guide</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/patient/Rate/<%= result.id %> "
            style="font-size: 18px; margin-top:6px; color: #0298EC;">Rate Us</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/patient/Lab/<%= result.id %> "
            style="font-size: 18px; margin-top:6px; color: #0298EC;">Lab Results</a>
        </li>
        <form action="/patient/LogOut" method="POST">
          <li class="nav-item">
            <button class="nav-link"
              style="margin-top: 5.9px; height: 20px; width: 20px; font-size: 18px;background-color: white;border: none; color: #0298EC;">Logout
            </button>
          </li>
        </form>
      </ul>
      <!-- <a class="navbar-brand" href="#">Offcanvas navbar</a> -->
    </div>
  </nav> <!-- <img src="images/alex-negroe-3XoA5WwD4ig-unsplash.jpg" alt=""> -->


  <div class="container1">My Appointments </div>
  <section class="container">
    <section class="wrapper">
      <header>
        <h1 style="text-align: center; margin-bottom: 30px;">Book Appointment</h1>
        <!-- <h2>Create a new account</h2> -->
      </header>
      <section class="main-content">
        <form action="/patient/Appointments/<%= result.id  %>/<%= result.fullname %>  " method="POST">
          <!-- <input type="text" name="DocName" id="Doctors Name" placeholder="Doctors Name" style="text-align: center;"
            required> -->
          <select name="docs" id="selectbox" required>
            <option style="text-align: center;" disabled selected>Select Doctor/Nurse</option>
            <% if(doctors.length>0){ %>
              <% doctors.forEach(doc=>{ %>
                <option value="<%= doc.Name %>">
                  <%=doc.Name %>
                </option>

                <% }) %>
                  <% } %>
          </select>
          <div class="line"></div>
          <input type="date" name="date" id="date_picker" style="text-align: center;" required>
          <script language="javascript">
            var today = new Date();
            var dd = String(today.getDate()).padStart(2, '0');
            var mm = String(today.getMonth() + 1).padStart(2, '0');
            var yyyy = today.getFullYear();

            today = yyyy + '-' + mm + '-' + dd;
            $('#date_picker').attr('min', today);
          </script>
          <div class="line"></div>
          <input type="time" name="time" id="time_picker" step="1800" style="text-align: center;" required>
          <div class="line"></div>
          <button type="submit" style="font-size: medium;">Book Appointment</button>
          <!-- <a href="/HomePage" style="text-decoration:none; color:white;"></a> -->
        </form>
      </section>
    </section>
    <% if(result.appointments.length> 0){ %>
      <div class="wrapper" style="display: inline-block; margin-left: 10px; min-width: 520px;">
        Upcoming Appointments: <br>
        <% result.appointments.forEach(appoint=>{%>
          <form action="/patient/deleteAppoint/<%= result.id %>/<%= appoint.time %>/<%= appoint.date %>/<%= appoint.name %>" method="POST">
            Time:<%= appoint.time %>, Date:<%= appoint.date %>, Reponsible: <%= appoint.name %> 
            <button
                    style="height: 40px; width: 100px;" type="submit" id="<%=appoint.time %>">Cancel</button></form>
          <br>
          <%}) %>
            <% } %>
      </div>

      <% if(apps.length> 0){ %>
        <div class="wrapper" style="margin-left:10px ; background-color: white; min-width : 570px;">

          <% apps.forEach(appoin=>{%>
            Responsible:<%= appoin.name %>,
              Date:<%= appoin.date %>,Time: <%= appoin.time %>(Taken)
                  <br>
                  <% }) %>

        </div>
        <% } %>
  </section>

</body>

</html>